<!DOCTYPE html>
<html>

<head>
    <title>Portal - Demo</title>
    <!-- 3 important scripts -->
    <script src="/static/lib/jquery-3.3.1.min.js"></script>
    <script src="/static/lib/intell.min.js"></script>
    <script src="/static/lib/portal.js"></script>

    <!-- 1 important style sheet -->
    <link href="/static/css/portal.css" rel="stylesheet" />

    <!-- place resources, that share for all applications-->
    <style>

        html{height:100%}
        body{display:flex;flex-direction:column;height:100%;margin:0;font-family:'Segoe UI';font-size:16px;background-color:#fff}

        .topbar{display:flex;flex:0 0 auto;height:40px;background-color:#1c1c1c}
        .topbar-logo{margin-left:10px;padding:0 10px;font-size:20px;line-height:40px;color:#55b3ff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-decoration:none}
        .topbar-button{display:flex;width:40px;align-items:center;justify-content:center;cursor:pointer}
        .topbar-button>.icon{width:24px;height:24px;background:center no-repeat}
        .topbar-button:hover{background:#3d3d3d}


        .topbar-button.console .icon{background-image:url(image/console.svg)}
    </style>
</head>
<body>
    
    <div class="topbar">
        <a class="topbar-logo" href="/">Xortal demo - Full Implement - Version 0.0.01</a>
        <div class="spring"></div>
        <div class="topbar-button console">
            <div class="icon"></div>
        </div>
    </div>


    <div class="X-Portal">
        <div class="Sidebar">
            <div class="Sidebar-Top">
                <div class="Collapse-Button" tabindex="0"></div>
            </div>
            <div class="Sidebar-Middle">
                <!-- Portal give the best ways to customize ui -->
                <div class="Group abstract" data-group="Account">
                    <header>
                        <div class="Name"></div>
                    </header>
                    <div class="Apps"></div>
                </div>

                <div class="Shortcut abstract" tabindex="0">
                    <i class="Icon"></i>
                    <span class="Name"></span>
                </div>
                <!--  -->
            </div>
        </div>
        <main class="Portal-Content">
            <div class="Loading-Overlay" style="display:none">
                <i class="spring"></i>
                <div class="content">
                    <i class="spring"></i>
                    <div class="Application-Name"></div>
                    <div class="Application-Description"></div>
                    <i class="spring" style="flex-grow:1.5"></i>
                </div>
                
                <i class="spring"></i>
                <div class="waiting-box">
                    <div class="cycle"></div>
                    <div class="cycle" style="animation-delay:.15s"></div>
                    <div class="cycle" style="animation-delay:.3s"></div>
                    <div class="cycle" style="animation-delay:.45s"></div>
                    <div class="cycle" style="animation-delay:.6s"></div>
                </div>
            </div>
                        
            <div class="Error-Overlay" style="display:none">
                <i class="spring"></i>
                <div>
                    <i class="spring"></i>
                    <div class="header">
                        <div class="icon">✖</div>
                        <div>
                            <div class="Application-Name"></div>
                            <div class="Message"></div>
                        </div>
                    </div>
                    <div class="Stack"></div>
                    <i class="spring" style="flex-grow:1.5"></i>
                </div>
                <i class="spring"></i>
            </div>

            <div class="Portal-Applications">


            </div>
        </main>
    </div>
    

    <script>
        var $portal = $('.X-Portal');
        var portal = window.portal = new Portal($portal[0]);

        $(document).ready(function() {
            /* Allow portal to load/save collapsed key on localStorage */
            portal.sidebar.enableCollapseStorage('portal.sidebar.collapsed');
            

            /* add a listener to customize url for current state of portal. */
            portal.onchange(function(e) {
                var qs = intell.qs();

                if (qs.application && qs.application.split('/')[0] == e.newApplication.manifest.id)
                    return;

                qs.application = e.newApplication.manifest.id;

                var names = Object.getOwnPropertyNames(qs);
                var url = '?' + names.map(function(name) {
                    return name + '=' + qs[name];
                }).join('&') + location.hash;

                history.replaceState(null, document.title, url);
            });

            var applicationId = intell.qs().application;
            if (applicationId) applicationId = applicationId.split('/')[0];

            
            portal.open(applicationId);
        })
    </script>

    <!-- List Application -->
    <script src="dashboard/dashboard.js"></script>
    <script src="simple-application/simple-application.js"></script>
    <script src="simple-application2/simple-application.js"></script>
    <script src="loading_5s/app.js"></script>
    <script src="loading_150s/app.js"></script>
    <script src="sub-portal/sub-portal.js"></script>
    <!-- Add many applications as you can -->

</body>
</html>